<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="css/signup.css">
</head>
<body style="padding-top: 1rem; padding-bottom: 1rem;">
    <div class="container">
        <div class="signup-form">
            <h2>Create Account</h2>
            
            
            <form id="signform" method="post" action="/signup">
                <div class="form-group">
                    <label for="full-name">Full Name</label>
                    <input type="text" id="name" placeholder="Enter Name" name="name">
                    <div id="error1" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="email" id="email" placeholder="Enter email" name="email">
                    <div id="error2" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" placeholder="Enter phone number" name="phone">
                    <div id="error3" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Password" name="password">
                    <div id="error4" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" placeholder="Confirm Password" name="cPassword">
                    <div id="error5" class="error-message"></div>
                </div>
                 <!-- ðŸŒŸ Referral Code Field (Optional) -->
                <div class="form-group">
                    <label for="referral-code">Referral Code <small>(Optional)</small></label>
                    <input type="text" id="referral-code" placeholder="Enter referral code if any" name="referralCode">
                </div>
                <button type="submit" class="signup-button">Sign Up</button>
            </form>
            <div class="social-signup">
                <p>or sign up with</p>
                <a href="/auth/google" class="google-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 533.5 544.3">
                        <path fill="#4285F4" d="M533.5 278.4c0-17.4-1.6-34.1-4.7-50.4H272v95.3h147.4c-6.3 34-25 62.8-53.2 82.1v68.2h85.9c50.3-46.3 81.4-114.5 81.4-195.2z"/>
                        <path fill="#34A853" d="M272 544.3c72.3 0 133-23.9 177.3-64.9l-85.9-68.2c-23.8 15.9-54.3 25.3-91.4 25.3-70 0-129.3-47.2-150.5-110.5H34.2v69.7C78.6 480.5 169.7 544.3 272 544.3z"/>
                        <path fill="#FBBC05" d="M121.5 325.9c-10.1-30-10.1-62.3 0-92.3V163.9H34.2c-38.6 76.3-38.6 165.9 0 242.2l87.3-69.7z"/>
                        <path fill="#EA4335" d="M272 107.7c39.3-.6 77 13.4 106.3 38.7l79.2-79.2C406.6 24.8 342.5-1.1 272 0 169.7 0 78.6 63.8 34.2 163.9l87.3 69.7c21.2-63.3 80.5-110.5 150.5-110.5z"/>
                      </svg>
                    Google
                </a>
            </div>
            <p class="login-link">Already registered? <a href="/login">Log in</a></p>
        </div>
        <div class="side-content">
            
            <div class="happy-shopping" >FLUXO</div>
            <img src="https://plus.unsplash.com/premium_photo-1669703777695-f8052a432411?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8bWFsZSUyMG1vZGVsc3xlbnwwfHwwfHx8MA%3D%3D" alt="Happy Shopper">
        </div>
    </div>
</body>
</html>

<script>

    const nameid = document.getElementById("name");
    const emailid = document.getElementById("email");
    const phoneid = document.getElementById("phone");
    const passid = document.getElementById("password");
    const cpassid = document.getElementById("confirm-password");

    const error1 = document.getElementById("error1");
    const error2 = document.getElementById("error2");
    const error3 = document.getElementById("error3");
    const error4 = document.getElementById("error4");
    const error5 = document.getElementById("error5");

    const signform = document.getElementById("signform");

    function nameValidateChecking(e) {
        const nameval = nameid.value;
        const namepattern = /^[A-Za-z\s]+$/;

        if(nameval.trim() === ""){
            error1.style.display ="block";
            error1.innerHTML = "Please enter a valid name";
        }else if(!namepattern.test(nameval)){
            error1.style.display ="block";
            error1.innerHTML = "Name can only contain alphabets and spaces";
        }else{
            error1.style.display ="none";
            error1.innerHTML = "";
        }
        
    }

    function emailValidateChecking(e) {
        
        const emailval = emailid.value;
        const emailpattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

        if(!emailpattern.test(emailval)){
            error2.style.display ="block";
            error2.innerHTML = "Invalid format";
        }else{
            error2.style.display ="none";
            error2.innerHTML = "";
        }
    }

    function phoneValidateChecking(e) {
        
        const phoneval = phoneid.value;
        if(phoneval.trim() ===""){
            error3.style.display ="block";
            error3.innerHTML = "Enter valid phone number";
        }else if(phoneval.length<10 || phoneval.length>10){
            error3.style.display ="block";
            error3.innerHTML = "Enter 10 digit";
        }else{
            error3.style.display ="none";
            error3.innerHTML = "";
        }
    }

    function passValidateChecking(e) {
        const passval = passid.value;
        const cpassval = cpassid.value;
        const alpha = /[a-zA-Z]/;
        const digit = /\d/;

        if(passval.length<8){
            error4.style.display ="block";
            error4.innerHTML = "Should contain atleast 8 characters";
        }else if(!alpha.test(passval) || !digit.test(passval)){
            error4.style.display ="block";
            error4.innerHTML = "Should contain numbers and alphabets";
        }else{
            error4.style.display ="none";
            error4.innerHTML = "";
        }

        if(passval!=cpassval){
            error5.style.display ="block";
            error5.innerHTML = "Passwords donot match";
        }else{
            error5.style.display ="none";
            error5.innerHTML = "";
        }
    }

    document.addEventListener("DOMContentLoaded",function(){
        signform.addEventListener("submit",function(e){

            nameValidateChecking();
            emailValidateChecking();
            phoneValidateChecking();
            passValidateChecking();

            if(
                !nameid ||
                !emailid ||
                !phoneid ||
                !passid ||
                !error1 ||
                !error2 ||
                !error3 ||
                !error4 ||
                !error5 ||
                !signform
            ){
                console.error("One or more elements not found");
                
            }
            if(
                error1.innerHTML ||
                error2.innerHTML ||
                error3.innerHTML ||
                error4.innerHTML ||
                error5.innerHTML 
            ){
                e.preventDefault()
            }

        })
    }
)


</script>
<!-- SweetAlert CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const refCode = urlParams.get("ref");

    if (refCode) {
      const referralInput = document.getElementById("referral-code");
      if (referralInput) {
        referralInput.value = refCode;
      }
    }
  });
</script>


<% if (typeof message !== 'undefined') { %>
<script>
    Swal.fire({
        icon: 'error',
        title: 'Oops...',
        text: '<%= message %>',
    });
</script>
<% } %>
